<html class="scroll-smooth" lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   MohsinTech - Professional Tech Blog
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
      font-family: "Inter", sans-serif;
      background: #f9fafb;
    }
    /* Scrollbar styling */
    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #e5e7eb;
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb {
      background: #3b82f6;
      border-radius: 4px;
    }
    /* Animations */
    @keyframes fadeInUp {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .fadeInUp {
      animation: fadeInUp 0.6s ease forwards;
    }
    @keyframes pulseScale {
      0%, 100% {
        transform: scale(1);
        opacity: 1;
      }
      50% {
        transform: scale(1.05);
        opacity: 0.85;
      }
    }
    .pulseScale {
      animation: pulseScale 2.5s ease-in-out infinite;
    }
    @keyframes slideInLeft {
      0% {
        opacity: 0;
        transform: translateX(-30px);
      }
      100% {
        opacity: 1;
        transform: translateX(0);
      }
    }
    .slideInLeft {
      animation: slideInLeft 0.7s ease forwards;
    }
    @keyframes slideInRight {
      0% {
        opacity: 0;
        transform: translateX(30px);
      }
      100% {
        opacity: 1;
        transform: translateX(0);
      }
    }
    .slideInRight {
      animation: slideInRight 0.7s ease forwards;
    }
    /* Button hover glow */
    .btn-glow:hover {
      box-shadow: 0 0 12px 3px rgba(59, 130, 246, 0.7);
      transform: translateY(-2px);
      transition: all 0.3s ease;
    }
    /* Card hover shadow */
    .card-hover:hover {
      box-shadow: 0 20px 30px -10px rgba(59, 130, 246, 0.3);
      transform: translateY(-6px);
      transition: all 0.3s ease;
    }
    /* Line clamp fallback for older browsers */
    .line-clamp-3 {
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    /* Article page styles */
    #article-page {
      max-width: 900px;
      margin: 2rem auto 4rem;
      background: white;
      border-radius: 1rem;
      box-shadow: 0 10px 30px rgba(59, 130, 246, 0.15);
      padding: 2.5rem 3rem;
      animation: fadeInUp 0.6s ease forwards;
    }
    #article-page img {
      border-radius: 1rem;
      max-height: 400px;
      object-fit: cover;
      width: 100%;
      margin-bottom: 1.5rem;
      box-shadow: 0 8px 20px rgba(59, 130, 246, 0.2);
      transition: transform 0.3s ease;
    }
    #article-page img:hover {
      transform: scale(1.03);
    }
    #article-page h1 {
      font-size: 2.75rem;
      font-weight: 800;
      color: #1e40af;
      margin-bottom: 1rem;
      letter-spacing: 0.02em;
    }
    #article-page .meta {
      font-family: monospace;
      color: #64748b;
      font-size: 0.9rem;
      margin-bottom: 2rem;
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 0.5rem 1rem;
    }
    #article-page .content {
      font-size: 1.125rem;
      line-height: 1.75;
      color: #334155;
      white-space: pre-line;
    }
    #article-back-button {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: #3b82f6;
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 9999px;
      font-weight: 600;
      box-shadow: 0 0 12px 3px rgba(59, 130, 246, 0.7);
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.3s ease;
      margin: 2rem auto 0;
      user-select: none;
      max-width: 160px;
      justify-content: center;
    }
    #article-back-button:hover {
      background: #2563eb;
      transform: translateY(-3px);
    }
    /* Footer improved */
    footer {
      background: linear-gradient(135deg, #1e3a8a, #2563eb);
      color: #dbeafe;
      padding: 3rem 1.5rem 2rem;
      font-size: 1rem;
      user-select: none;
    }
    footer a {
      color: #bfdbfe;
      transition: color 0.3s ease;
    }
    footer a:hover {
      color: #f0f9ff;
      text-decoration: underline;
    }
    footer h4, footer h5 {
      font-weight: 700;
      margin-bottom: 1rem;
      letter-spacing: 0.05em;
    }
    footer ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    footer ul li {
      margin-bottom: 0.6rem;
    }
    footer .footer-grid {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 2.5rem;
    }
    footer .footer-bottom {
      margin-top: 3rem;
      text-align: center;
      font-size: 0.875rem;
      color: #93c5fd;
      letter-spacing: 0.05em;
    }
    footer .social-icons a {
      font-size: 1.5rem;
      margin-right: 1.25rem;
      display: inline-block;
      transition: transform 0.3s ease, color 0.3s ease;
    }
    footer .social-icons a:hover {
      color: #f0f9ff;
      transform: scale(1.2);
    }
  </style>
 </head>
 <body class="bg-gray-50 text-gray-800 min-h-screen flex flex-col">
  <!-- Header / Navbar -->
  <header class="bg-white shadow-lg sticky top-0 z-50 border-b border-gray-200">
   <div class="max-w-7xl mx-auto px-6 sm:px-8 lg:px-12">
    <div class="flex justify-between items-center h-16">
     <a aria-label="MohsinTech Home" class="flex items-center space-x-3" href="#" id="home-link">
      <img alt="MohsinTech logo letter M in blue circle" class="h-12 w-12 rounded-full border-2 border-blue-600 pulseScale" height="48" src="https://storage.googleapis.com/a1aa/image/dcfe3751-b346-4158-4970-0ffe49a7adaf.jpg" width="48"/>
      <span class="text-3xl font-extrabold text-blue-600 tracking-wide select-none drop-shadow-md">
       MohsinTech
      </span>
     </a>
     <div class="hidden md:flex flex-1 mx-8">
      <div class="relative w-full max-w-lg">
       <input aria-label="Search articles" class="w-full border border-gray-300 rounded-full pl-12 pr-5 py-3 text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-blue-300 transition shadow-sm" id="search-input" placeholder="Search articles..." type="text"/>
       <div class="absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none text-blue-500">
        <i class="fas fa-search fa-lg">
        </i>
       </div>
      </div>
     </div>
     <nav class="hidden md:flex space-x-6 text-gray-700 font-semibold items-center select-none" id="nav-links">
      <a class="hover:text-blue-600 transition cursor-pointer text-lg btn-glow" id="nav-login">
       Login
      </a>
      <a class="hover:text-blue-600 transition cursor-pointer hidden text-lg btn-glow" id="nav-logout">
       Logout
      </a>
     </nav>
     <div class="md:hidden flex items-center space-x-5">
      <button aria-label="Open search" class="text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500" id="mobile-search-button">
       <i class="fas fa-search fa-lg">
       </i>
      </button>
      <button aria-label="Toggle menu" class="text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500" id="mobile-menu-button">
       <i class="fas fa-bars fa-lg">
       </i>
      </button>
     </div>
    </div>
   </div>
   <nav class="hidden md:hidden bg-white border-t border-gray-200" id="mobile-menu">
    <div class="px-5 pt-3 pb-5 space-y-2" id="mobile-nav-links">
     <a class="block px-4 py-3 rounded-lg text-base font-semibold text-blue-600 hover:bg-blue-50 transition cursor-pointer" id="mobile-nav-login">
      Login
     </a>
     <a class="block px-4 py-3 rounded-lg text-base font-semibold text-blue-600 hover:bg-blue-50 transition cursor-pointer hidden" id="mobile-nav-logout">
      Logout
     </a>
    </div>
   </nav>
   <!-- Mobile Search Overlay -->
   <div aria-labelledby="mobile-search-label" aria-modal="true" class="fixed inset-0 bg-white z-50 p-5 hidden" id="mobile-search-overlay" role="dialog">
    <div class="flex items-center space-x-4 max-w-md mx-auto">
     <input aria-label="Search articles" autofocus="" class="flex-grow border border-gray-300 rounded-full px-5 py-3 text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-blue-300 shadow-sm transition" id="mobile-search-input" placeholder="Search articles..." type="text"/>
     <button aria-label="Close search" class="text-blue-600 hover:text-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500" id="mobile-search-close">
      <i class="fas fa-times fa-lg">
      </i>
     </button>
    </div>
   </div>
  </header>
  <!-- Buttons below header for logged in users -->
  <div class="max-w-7xl mx-auto px-6 sm:px-8 lg:px-12 py-5 hidden flex flex-col sm:flex-row sm:space-x-6 space-y-4 sm:space-y-0 bg-white shadow-lg rounded-b-lg sticky top-16 z-40 fadeInUp" id="user-action-buttons">
   <button class="bg-blue-600 text-white px-7 py-3 rounded-full font-semibold hover:bg-blue-700 transition shadow-lg btn-glow w-full sm:w-auto flex items-center justify-center space-x-2" id="upload-article-button" type="button">
    <i class="fas fa-upload fa-lg animate-pulse">
    </i>
    <span>
     Upload Article
    </span>
   </button>
   <button class="bg-green-600 text-white px-7 py-3 rounded-full font-semibold hover:bg-green-700 transition shadow-lg btn-glow w-full sm:w-auto flex items-center justify-center space-x-2 hidden" id="admin-panel-button" type="button">
    <i class="fas fa-user-shield fa-lg animate-pulse">
    </i>
    <span>
     Admin Panel
    </span>
   </button>
  </div>
  <!-- Main Content -->
  <main class="flex-grow max-w-7xl mx-auto px-6 sm:px-8 lg:px-12 py-10">
   <!-- Blog Posts Container -->
   <section class="grid gap-10 sm:grid-cols-2 lg:grid-cols-3" id="blog-posts">
   </section>
   <!-- Article Detail Page (hidden by default) -->
   <section class="hidden" id="article-page-container" tabindex="-1" aria-label="Article detail page">
    <div id="article-page">
     <button aria-label="Back to articles" id="article-back-button" type="button">
      <i class="fas fa-arrow-left">
      </i>
      <span>
       Back to Articles
      </span>
     </button>
     <img alt="" id="article-image" src="" loading="lazy"/>
     <h1 id="article-title">
     </h1>
     <div class="meta" id="article-meta">
     </div>
     <div class="content" id="article-content">
     </div>
    </div>
   </section>
   <!-- Upload Article Modal -->
   <div aria-labelledby="upload-article-title" aria-modal="true" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-6 hidden z-50" id="upload-article-modal" role="dialog">
    <div aria-modal="true" class="bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto p-8 relative transform scale-95 opacity-0 transition-all duration-300 ease-out" id="upload-article-modal-content" role="document" tabindex="-1">
     <button aria-label="Close upload article modal" class="absolute top-5 right-5 text-gray-600 hover:text-gray-900 focus:outline-none" id="close-upload-article">
      <i class="fas fa-times fa-lg">
      </i>
     </button>
     <h2 class="text-3xl font-extrabold mb-8 text-gray-900 tracking-wide text-center" id="upload-article-title">
      Upload New Article
     </h2>
     <form class="space-y-6" id="upload-article-form">
      <div>
       <label class="block font-semibold mb-2 text-gray-700" for="article-title">
        Title
       </label>
       <input class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-4 focus:ring-blue-400 transition shadow-sm" id="article-title" name="title" placeholder="Enter article title" required="" type="text"/>
      </div>
      <div>
       <label class="block font-semibold mb-2 text-gray-700" for="article-category">
        Category
       </label>
       <select class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-4 focus:ring-blue-400 transition shadow-sm" id="article-category" name="category" required="">
        <option value="">
         Select category
        </option>
        <option value="Technology">
         Technology
        </option>
        <option value="Lifestyle">
         Lifestyle
        </option>
        <option value="Travel">
         Travel
        </option>
        <option value="Health">
         Health
        </option>
        <option value="Food">
         Food
        </option>
       </select>
      </div>
      <div>
       <label class="block font-semibold mb-2 text-gray-700" for="article-image">
        Image URL
       </label>
       <input class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-4 focus:ring-blue-400 transition shadow-sm" id="article-image" name="image" placeholder="Enter image URL" required="" type="url"/>
      </div>
      <div>
       <label class="block font-semibold mb-2 text-gray-700" for="article-content">
        Content
       </label>
       <textarea class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-4 focus:ring-blue-400 transition shadow-sm resize-none" id="article-content" name="content" placeholder="Write your article content here..." required="" rows="6"></textarea>
      </div>
      <div class="text-center">
       <button class="bg-blue-600 text-white px-10 py-3 rounded-full font-semibold hover:bg-blue-700 transition shadow-lg btn-glow" type="submit">
        Submit Article
       </button>
      </div>
     </form>
    </div>
   </div>
   <!-- Login Modal -->
   <div aria-labelledby="login-title" aria-modal="true" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-6 hidden z-50" id="login-modal" role="dialog">
    <div aria-modal="true" class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 relative transform scale-95 opacity-0 transition-all duration-300 ease-out" id="login-modal-content" role="document" tabindex="-1">
     <button aria-label="Close login modal" class="absolute top-5 right-5 text-gray-600 hover:text-gray-900 focus:outline-none" id="close-login">
      <i class="fas fa-times fa-lg">
      </i>
     </button>
     <h2 class="text-3xl font-extrabold mb-8 text-gray-900 text-center tracking-wide" id="login-title">
      Login
     </h2>
     <form class="space-y-6" id="login-form">
      <div>
       <label class="block font-semibold mb-2 text-gray-700" for="login-username">
        Username
       </label>
       <input autocomplete="username" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-4 focus:ring-blue-400 transition shadow-sm" id="login-username" name="username" placeholder="Enter username" required="" type="text"/>
      </div>
      <div>
       <label class="block font-semibold mb-2 text-gray-700" for="login-password">
        Password
       </label>
       <input autocomplete="current-password" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-4 focus:ring-blue-400 transition shadow-sm" id="login-password" name="password" placeholder="Enter password" required="" type="password"/>
      </div>
      <div>
       <button class="w-full bg-blue-600 text-white px-10 py-3 rounded-full font-semibold hover:bg-blue-700 transition shadow-lg btn-glow" type="submit">
        Login
       </button>
      </div>
     </form>
    </div>
   </div>
   <!-- Admin Panel Modal -->
   <div aria-labelledby="admin-panel-title" aria-modal="true" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-6 hidden z-50" id="admin-panel-modal" role="dialog">
    <div aria-modal="true" class="bg-white rounded-2xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-y-auto p-8 relative transform scale-95 opacity-0 transition-all duration-300 ease-out" id="admin-panel-modal-content" role="document" tabindex="-1">
     <button aria-label="Close admin panel modal" class="absolute top-5 right-5 text-gray-600 hover:text-gray-900 focus:outline-none" id="close-admin-panel">
      <i class="fas fa-times fa-lg">
      </i>
     </button>
     <h2 class="text-3xl font-extrabold mb-8 text-gray-900 text-center tracking-wide" id="admin-panel-title">
      Admin Panel - Pending Articles
     </h2>
     <div class="space-y-8" id="pending-articles-list">
     </div>
    </div>
   </div>
  </main>
  <!-- Footer -->
  <footer>
   <div class="footer-grid px-6 sm:px-8 lg:px-12 py-14">
    <div>
     <h4>
      MohsinTech
     </h4>
     <p>
      Your professional source for the latest in technology, innovation, and insightful articles.
     </p>
     <div class="social-icons mt-6">
      <a aria-label="Facebook" href="#" rel="noopener" target="_blank" title="Facebook">
       <i class="fab fa-facebook">
       </i>
      </a>
      <a aria-label="Twitter" href="#" rel="noopener" target="_blank" title="Twitter">
       <i class="fab fa-twitter">
       </i>
      </a>
      <a aria-label="Instagram" href="#" rel="noopener" target="_blank" title="Instagram">
       <i class="fab fa-instagram">
       </i>
      </a>
      <a aria-label="LinkedIn" href="#" rel="noopener" target="_blank" title="LinkedIn">
       <i class="fab fa-linkedin">
       </i>
      </a>
     </div>
    </div>
    <div>
     <h5>
      Categories
     </h5>
     <ul>
      <li>
       <a href="#">
        Technology
       </a>
      </li>
      <li>
       <a href="#">
        Lifestyle
       </a>
      </li>
      <li>
       <a href="#">
        Travel
       </a>
      </li>
      <li>
       <a href="#">
        Health
       </a>
      </li>
      <li>
       <a href="#">
        Food
       </a>
      </li>
     </ul>
    </div>
    <div>
     <h5>
      Quick Links
     </h5>
     <ul>
      <li>
       <a href="#">
        About Us
       </a>
      </li>
      <li>
       <a href="#">
        Contact
       </a>
      </li>
      <li>
       <a href="#">
        Privacy Policy
       </a>
      </li>
      <li>
       <a href="#">
        Terms of Service
       </a>
      </li>
     </ul>
    </div>
    <div>
     <h5>
      Contact
     </h5>
     <address class="not-italic space-y-3">
      <p>
       123 MohsinTech Avenue
      </p>
      <p>
       Tech City, MT 78901
      </p>
      <p>
       Email:
       <a href="mailto:contact@mohsintech.com">
        contact@mohsintech.com
       </a>
      </p>
      <p>
       Phone:
       <a href="tel:+1234567890">
        +1 (234) 567-890
       </a>
      </p>
     </address>
    </div>
   </div>
   <div class="footer-bottom">
    © 2024 MohsinTech. All rights reserved.
   </div>
  </footer>
  <script>
   // Mobile menu toggle
    const menuButton = document.getElementById("mobile-menu-button");
    const mobileMenu = document.getElementById("mobile-menu");
    menuButton.addEventListener("click", () => {
      mobileMenu.classList.toggle("hidden");
      // Close mobile search if open
      mobileSearchOverlay.classList.add("hidden");
    });

    // Mobile search toggle
    const mobileSearchButton = document.getElementById("mobile-search-button");
    const mobileSearchOverlay = document.getElementById("mobile-search-overlay");
    const mobileSearchClose = document.getElementById("mobile-search-close");
    const mobileSearchInput = document.getElementById("mobile-search-input");

    mobileSearchButton.addEventListener("click", () => {
      mobileSearchOverlay.classList.remove("hidden");
      mobileSearchInput.focus();
      mobileMenu.classList.add("hidden");
    });
    mobileSearchClose.addEventListener("click", () => {
      mobileSearchOverlay.classList.add("hidden");
      mobileSearchInput.value = "";
      renderBlogPosts();
    });

    // Elements
    const navLogin = document.getElementById("nav-login");
    const navLogout = document.getElementById("nav-logout");

    const mobileNavLogin = document.getElementById("mobile-nav-login");
    const mobileNavLogout = document.getElementById("mobile-nav-logout");

    const loginModal = document.getElementById("login-modal");
    const closeLogin = document.getElementById("close-login");
    const loginForm = document.getElementById("login-form");

    const uploadArticleModal = document.getElementById("upload-article-modal");
    const closeUploadArticle = document.getElementById("close-upload-article");
    const uploadArticleForm = document.getElementById("upload-article-form");

    const adminPanelModal = document.getElementById("admin-panel-modal");
    const closeAdminPanel = document.getElementById("close-admin-panel");
    const pendingArticlesList = document.getElementById("pending-articles-list");

    const blogPostsContainer = document.getElementById("blog-posts");

    const searchInput = document.getElementById("search-input");

    const userActionButtons = document.getElementById("user-action-buttons");
    const uploadArticleButton = document.getElementById("upload-article-button");
    const adminPanelButton = document.getElementById("admin-panel-button");

    // Article page elements
    const articlePageContainer = document.getElementById("article-page-container");
    const articleImage = document.getElementById("article-image");
    const articleTitle = document.getElementById("article-title");
    const articleMeta = document.getElementById("article-meta");
    const articleContent = document.getElementById("article-content");
    const articleBackButton = document.getElementById("article-back-button");

    // State
    let currentUser = null; // {username, role: 'admin'|'user'}
    let articles = []; // approved articles
    let pendingArticles = []; // articles waiting for admin approval

    // Simulated backend API (using localStorage for persistence)
    const STORAGE_KEY_ARTICLES = "blogsphere_articles";
    const STORAGE_KEY_PENDING = "blogsphere_pending";
    const STORAGE_KEY_USERS = "blogsphere_users";
    const STORAGE_KEY_CURRENT_USER = "blogsphere_current_user";

    // Initialize users (admin and user)
    function initUsers() {
      if (!localStorage.getItem(STORAGE_KEY_USERS)) {
        const users = [
          { username: "admin", password: "admin123", role: "admin" },
          { username: "user", password: "user123", role: "user" },
        ];
        localStorage.setItem(STORAGE_KEY_USERS, JSON.stringify(users));
      }
    }

    // Load articles from localStorage
    function loadArticles() {
      const savedArticles = localStorage.getItem(STORAGE_KEY_ARTICLES);
      articles = savedArticles ? JSON.parse(savedArticles) : [];
    }

    // Load pending articles from localStorage
    function loadPendingArticles() {
      const savedPending = localStorage.getItem(STORAGE_KEY_PENDING);
      pendingArticles = savedPending ? JSON.parse(savedPending) : [];
    }

    // Save articles to localStorage
    function saveArticles() {
      localStorage.setItem(STORAGE_KEY_ARTICLES, JSON.stringify(articles));
    }

    // Save pending articles to localStorage
    function savePendingArticles() {
      localStorage.setItem(STORAGE_KEY_PENDING, JSON.stringify(pendingArticles));
    }

    // Save current user to localStorage
    function saveCurrentUser() {
      if (currentUser) {
        localStorage.setItem(STORAGE_KEY_CURRENT_USER, JSON.stringify(currentUser));
      } else {
        localStorage.removeItem(STORAGE_KEY_CURRENT_USER);
      }
    }

    // Load current user from localStorage
    function loadCurrentUser() {
      const savedUser = localStorage.getItem(STORAGE_KEY_CURRENT_USER);
      currentUser = savedUser ? JSON.parse(savedUser) : null;
    }

    // Render blog posts (only approved)
    function renderBlogPosts(filterCategory = null, searchTerm = "") {
      blogPostsContainer.innerHTML = "";
      let filtered = articles;
      if (filterCategory) {
        filtered = articles.filter(
          (a) => a.category.toLowerCase() === filterCategory.toLowerCase()
        );
      }
      if (searchTerm) {
        const term = searchTerm.toLowerCase();
        filtered = filtered.filter(
          (a) =>
            a.title.toLowerCase().includes(term) ||
            a.content.toLowerCase().includes(term) ||
            a.category.toLowerCase().includes(term) ||
            a.author.toLowerCase().includes(term)
        );
      }
      if (filtered.length === 0) {
        blogPostsContainer.innerHTML =
          '<p class="text-center text-gray-500 col-span-full text-lg mt-20">No articles found.</p>';
        return;
      }
      filtered.forEach((article, i) => {
        const articleEl = document.createElement("article");
        articleEl.className =
          "bg-white rounded-2xl shadow-lg overflow-hidden flex flex-col cursor-pointer hover:shadow-2xl transition card-hover fadeInUp";
        articleEl.style.animationDelay = `${i * 0.1}s`;
        articleEl.tabIndex = 0;
        articleEl.setAttribute("role", "link");
        articleEl.setAttribute("aria-label", `Read article titled ${article.title}`);

        articleEl.innerHTML = `
          <img
            src="${article.image}"
            alt="${article.title} - ${article.category} blog post image"
            class="w-full h-56 sm:h-48 md:h-52 object-cover transition-transform duration-500 hover:scale-105"
            height="350"
            width="600"
            loading="lazy"
          />
          <div class="p-6 flex flex-col flex-grow">
            <h3 class="text-2xl font-bold text-gray-900 mb-3 tracking-wide">${article.title}</h3>
            <p class="text-gray-600 flex-grow line-clamp-3 leading-relaxed">${article.content}</p>
            <div class="mt-5 flex items-center justify-between text-sm text-gray-500 font-mono tracking-wide">
              <span>By ${article.author}</span>
              <time datetime="${article.date}">${new Date(article.date).toLocaleDateString()}</time>
            </div>
          </div>
        `;
        // On click open article page
        articleEl.addEventListener("click", () => {
          openArticlePage(article);
        });
        // Keyboard accessibility: open on Enter or Space
        articleEl.addEventListener("keydown", (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            openArticlePage(article);
          }
        });
        blogPostsContainer.appendChild(articleEl);
      });
    }

    // Open article detail page
    function openArticlePage(article) {
      // Hide main blog posts and user buttons
      blogPostsContainer.style.display = "none";
      userActionButtons.style.display = "none";
      // Fill article page content
      articleImage.src = article.image;
      articleImage.alt = `${article.title} - ${article.category} blog post image`;
      articleTitle.textContent = article.title;
      articleMeta.innerHTML = `
        <span>By ${article.author}</span>
        <time datetime="${article.date}">${new Date(article.date).toLocaleDateString()}</time>
        <span class="capitalize">${article.category}</span>
      `;
      articleContent.textContent = article.content;
      // Show article page container
      articlePageContainer.classList.remove("hidden");
      articlePageContainer.focus();
      // Scroll to top smoothly
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    // Back button on article page
    articleBackButton.addEventListener("click", () => {
      articlePageContainer.classList.add("hidden");
      blogPostsContainer.style.display = "";
      userActionButtons.style.display = "";
      // Scroll to top smoothly
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    // Render pending articles in admin panel
    function renderPendingArticles() {
      pendingArticlesList.innerHTML = "";
      if (pendingArticles.length === 0) {
        pendingArticlesList.innerHTML =
          '<p class="text-center text-gray-500 text-lg mt-10">No pending articles for approval.</p>';
        return;
      }
      pendingArticles.forEach((article, index) => {
        const articleEl = document.createElement("div");
        articleEl.className =
          "border border-gray-300 rounded-xl p-6 bg-gray-50 shadow-md flex flex-col md:flex-row md:items-center md:justify-between gap-6";
        articleEl.innerHTML = `
          <div class="flex flex-col md:flex-row md:items-center md:space-x-8 cursor-pointer" tabindex="0" role="button" aria-label="View pending article titled ${article.title}">
            <img src="${article.image}" alt="${article.title} - pending article image" class="w-40 h-24 object-cover rounded-lg shadow-md" height="96" width="160" loading="lazy" />
            <div>
              <h3 class="text-xl font-semibold text-gray-900 mb-2">${article.title}</h3>
              <p class="text-gray-700 line-clamp-3 leading-relaxed">${article.content}</p>
              <p class="text-sm text-gray-500 mt-2 font-mono tracking-wide">Category: ${article.category} | Author: ${article.author}</p>
            </div>
          </div>
          <div class="mt-4 md:mt-0 flex space-x-5">
            <button data-index="${index}" class="approve-btn bg-green-600 text-white px-5 py-3 rounded-full hover:bg-green-700 transition shadow-lg btn-glow flex items-center space-x-2">
              <i class="fas fa-check fa-lg"></i><span>Approve</span>
            </button>
            <button data-index="${index}" class="reject-btn bg-red-600 text-white px-5 py-3 rounded-full hover:bg-red-700 transition shadow-lg btn-glow flex items-center space-x-2">
              <i class="fas fa-times fa-lg"></i><span>Reject</span>
            </button>
          </div>
        `;
        pendingArticlesList.appendChild(articleEl);
      });

      // Add event listeners for approve/reject buttons
      document.querySelectorAll(".approve-btn").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          const idx = parseInt(e.currentTarget.getAttribute("data-index"));
          approveArticle(idx);
        });
      });
      document.querySelectorAll(".reject-btn").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          const idx = parseInt(e.currentTarget.getAttribute("data-index"));
          rejectArticle(idx);
        });
      });
    }

    // Approve article
    function approveArticle(index) {
      const article = pendingArticles[index];
      articles.push(article);
      pendingArticles.splice(index, 1);
      saveArticles();
      savePendingArticles();
      renderPendingArticles();
      renderBlogPosts();
      alert(`Article "${article.title}" approved and published.`);
    }

    // Reject article
    function rejectArticle(index) {
      const article = pendingArticles[index];
      if (
        confirm(
          `Are you sure you want to reject and delete the article "${article.title}"?`
        )
      ) {
        pendingArticles.splice(index, 1);
        savePendingArticles();
        renderPendingArticles();
      }
    }

    // Show modal helper with animation
    function showModal(modal) {
      modal.classList.remove("hidden");
      const content = modal.querySelector("[role='document']");
      if (content) {
        content.classList.remove("opacity-0", "scale-95");
        content.classList.add("opacity-100", "scale-100");
        content.focus();
      }
      document.body.style.overflow = "hidden";
    }

    // Hide modal helper with animation
    function hideModal(modal) {
      const content = modal.querySelector("[role='document']");
      if (content) {
        content.classList.remove("opacity-100", "scale-100");
        content.classList.add("opacity-0", "scale-95");
        setTimeout(() => {
          modal.classList.add("hidden");
        }, 250);
      } else {
        modal.classList.add("hidden");
      }
      document.body.style.overflow = "";
    }

    // Login modal open/close
    navLogin.addEventListener("click", () => {
      showModal(loginModal);
    });
    mobileNavLogin.addEventListener("click", () => {
      showModal(loginModal);
      mobileMenu.classList.add("hidden");
    });
    closeLogin.addEventListener("click", () => {
      hideModal(loginModal);
    });

    // Upload article modal open/close
    uploadArticleButton.addEventListener("click", () => {
      if (!currentUser) {
        alert("Please login to upload articles.");
        showModal(loginModal);
        return;
      }
      showModal(uploadArticleModal);
    });
    closeUploadArticle.addEventListener("click", () => {
      hideModal(uploadArticleModal);
      uploadArticleForm.reset();
    });

    // Admin panel modal open/close
    adminPanelButton.addEventListener("click", () => {
      if (!currentUser || currentUser.role !== "admin") {
        alert("Admin access only. Please login as admin.");
        showModal(loginModal);
        return;
      }
      renderPendingArticles();
      showModal(adminPanelModal);
    });
    closeAdminPanel.addEventListener("click", () => {
      hideModal(adminPanelModal);
    });

    // Login form submit
    loginForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const username = loginForm.username.value.trim();
      const password = loginForm.password.value.trim();
      const users = JSON.parse(localStorage.getItem(STORAGE_KEY_USERS)) || [];
      const user = users.find(
        (u) => u.username === username && u.password === password
      );
      if (user) {
        currentUser = { username: user.username, role: user.role };
        saveCurrentUser();
        alert(`Welcome, ${user.username}! You are logged in as ${user.role}.`);
        updateNavForUser();
        hideModal(loginModal);
        loginForm.reset();
      } else {
        alert("Invalid username or password.");
      }
    });

    // Logout
    navLogout.addEventListener("click", () => {
      logoutUser();
    });
    mobileNavLogout.addEventListener("click", () => {
      logoutUser();
      mobileMenu.classList.add("hidden");
    });

    function logoutUser() {
      currentUser = null;
      saveCurrentUser();
      alert("You have been logged out.");
      updateNavForUser();
      // If article page open, close it
      if (!articlePageContainer.classList.contains("hidden")) {
        articlePageContainer.classList.add("hidden");
        blogPostsContainer.style.display = "";
        userActionButtons.style.display = "";
      }
    }

    // Upload article form submit
    uploadArticleForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const title = uploadArticleForm.title.value.trim();
      const category = uploadArticleForm.category.value;
      const image = uploadArticleForm.image.value.trim();
      const content = uploadArticleForm.content.value.trim();
      if (!title || !category || !image || !content) {
        alert("Please fill in all fields.");
        return;
      }
      const newArticle = {
        id: Date.now(),
        title,
        category,
        image,
        content,
        author: currentUser.username,
        date: new Date().toISOString(),
      };
      pendingArticles.push(newArticle);
      savePendingArticles();
      alert(
        "Article submitted successfully! It will be published after admin approval."
      );
      uploadArticleForm.reset();
      hideModal(uploadArticleModal);
    });

    // Update navigation links and buttons based on user login state
    function updateNavForUser() {
      if (currentUser) {
        navLogin.classList.add("hidden");
        mobileNavLogin.classList.add("hidden");
        navLogout.classList.remove("hidden");
        mobileNavLogout.classList.remove("hidden");
        userActionButtons.classList.remove("hidden");
        uploadArticleButton.classList.remove("hidden");
        if (currentUser.role === "admin") {
          adminPanelButton.classList.remove("hidden");
        } else {
          adminPanelButton.classList.add("hidden");
        }
      } else {
        navLogin.classList.remove("hidden");
        mobileNavLogin.classList.remove("hidden");
        navLogout.classList.add("hidden");
        mobileNavLogout.classList.add("hidden");
        userActionButtons.classList.add("hidden");
        uploadArticleButton.classList.add("hidden");
        adminPanelButton.classList.add("hidden");
      }
    }

    // Search input event
    searchInput.addEventListener("input", (e) => {
      const term = e.target.value.trim();
      renderBlogPosts(null, term);
    });

    // Mobile search input event
    mobileSearchInput.addEventListener("input", (e) => {
      const term = e.target.value.trim();
      renderBlogPosts(null, term);
    });

    // Home link click: close article page if open
    document.getElementById("home-link").addEventListener("click", (e) => {
      e.preventDefault();
      if (!articlePageContainer.classList.contains("hidden")) {
        articlePageContainer.classList.add("hidden");
        blogPostsContainer.style.display = "";
        userActionButtons.style.display = "";
        window.scrollTo({ top: 0, behavior: "smooth" });
      }
    });

    // Initialization
    function init() {
      initUsers();
      loadArticles();
      loadPendingArticles();
      loadCurrentUser();
      updateNavForUser();
      renderBlogPosts();
    }

    init();
  </script>
 </body>
</html>
